# é¡¹ç›®ç»“æ„åˆ›å»ºæ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### ğŸ“ ç›®å½•ç»“æ„
å·²æ ¹æ® `docs/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡æ¡£ï¼ˆdevelopment.md, backend_guide.md, frontend_guide.md, architecture.mdï¼‰ä»¥åŠ README.md å’Œ idea.mdï¼Œåˆ›å»ºäº†å®Œæ•´çš„é¡¹ç›®ç›®å½•ç»“æ„ã€‚

### ğŸ—‚ï¸ åˆ›å»ºçš„ç›®å½•

#### åç«¯ (backend/)
- `core/` - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
  - audio_analyzer.py âœ…
  - expression_generator.py âœ…
  - langchain_agent.py âœ…
  - live2d_controller.py âœ…
  
- `api/` - API æœåŠ¡
  - main.py âœ…
  - routes/
    - upload.py âœ…
    - analyze.py âœ…
    - expression.py âœ…
    
- `models/` - æ•°æ®æ¨¡å‹
  - audio.py âœ…
  - expression.py âœ…
  - response.py âœ…
  
- `utils/` - å·¥å…·å‡½æ•°
  - config.py âœ…
  - file_utils.py âœ…
  - audio_utils.py âœ…

#### å‰ç«¯ (frontend/)
- `pages/` - Streamlit é¡µé¢
  - upload.py âœ…
  - preview.py âœ…
  
- `components/` - å¯å¤ç”¨ç»„ä»¶
  - (å¾…æ·»åŠ å…·ä½“ç»„ä»¶)
  
- `static/` - é™æ€èµ„æº
  - css/ (å¾…æ·»åŠ æ ·å¼æ–‡ä»¶)
  - js/ (å¾…æ·»åŠ è„šæœ¬æ–‡ä»¶)
  - images/ (é¢„ç•™)
  
- `utils/` - å‰ç«¯å·¥å…·
  - api_client.py âœ…

#### æ•°æ®ç›®å½• (data/)
- uploads/ - ä¸Šä¼ çš„éŸ³é¢‘æ–‡ä»¶
- expressions/ - ç”Ÿæˆçš„è¡¨æƒ…æ–‡ä»¶
- temp/ - ä¸´æ—¶æ–‡ä»¶
- cache/ - ç¼“å­˜æ–‡ä»¶

#### æ¨¡å‹ç›®å½• (models/)
- hiyori/ - Hiyori æ¨¡å‹æ–‡ä»¶
- assets/ - æ¨¡å‹èµ„æº

#### é…ç½®ç›®å½• (config/)
- expression_mapping.json âœ…

#### æµ‹è¯•ç›®å½• (tests/)
- backend/ - åç«¯æµ‹è¯•
- frontend/ - å‰ç«¯æµ‹è¯•
- integration/ - é›†æˆæµ‹è¯•

#### å…¶ä»–ç›®å½•
- logs/ - æ—¥å¿—æ–‡ä»¶
- scripts/ - è„šæœ¬å·¥å…·
- docs/ - é¡¹ç›®æ–‡æ¡£ï¼ˆå·²å­˜åœ¨ï¼‰

### ğŸ“„ åˆ›å»ºçš„æ ¸å¿ƒæ–‡ä»¶

#### é¡¹ç›®é…ç½®
- âœ… requirements.txt - Python ä¾èµ–åˆ—è¡¨
- âœ… .env.example - ç¯å¢ƒå˜é‡æ¨¡æ¿
- âœ… .gitignore - Git å¿½ç•¥æ–‡ä»¶
- âœ… app.py - Streamlit ä¸»åº”ç”¨
- âœ… setup_project.py - é¡¹ç›®ç»“æ„åˆ›å»ºè„šæœ¬

#### åç«¯æ ¸å¿ƒæ¨¡å—
1. **éŸ³é¢‘åˆ†æå™¨** (audio_analyzer.py)
   - èŠ‚æ‹æ£€æµ‹
   - éŸ³é«˜åˆ†æ
   - èƒ½é‡æå–
   - é¢‘è°±åˆ†æ
   - æƒ…æ„Ÿè¯†åˆ«

2. **è¡¨æƒ…ç”Ÿæˆå™¨** (expression_generator.py)
   - éŸ³é¢‘ç‰¹å¾æ•´åˆ
   - è¡¨æƒ…å…³é”®å¸§ç”Ÿæˆ
   - å¹³æ»‘å¤„ç†
   - æ–‡ä»¶å¯¼å‡º

3. **LangChain ä»£ç†** (langchain_agent.py)
   - AI è¡¨æƒ…æ˜ å°„
   - å‚æ•°ç”Ÿæˆ
   - æ‰¹é‡å¤„ç†

4. **Live2D æ§åˆ¶å™¨** (live2d_controller.py)
   - å‚æ•°ç®¡ç†
   - åŠ¨ç”»å¯¼å‡º
   - æ›²çº¿æ„å»º

#### API è·¯ç”±
- âœ… upload.py - æ–‡ä»¶ä¸Šä¼ 
- âœ… analyze.py - éŸ³é¢‘åˆ†æ
- âœ… expression.py - è¡¨æƒ…ç”Ÿæˆ

#### å‰ç«¯é¡µé¢
- âœ… upload.py - éŸ³é¢‘ä¸Šä¼ ç•Œé¢
- âœ… preview.py - Live2D é¢„è§ˆç•Œé¢
- âœ… app.py - ä¸»åº”ç”¨ç•Œé¢

#### å·¥å…·æ¨¡å—
- âœ… config.py - é…ç½®ç®¡ç†
- âœ… file_utils.py - æ–‡ä»¶å¤„ç†å·¥å…·
- âœ… audio_utils.py - éŸ³é¢‘å¤„ç†å·¥å…·
- âœ… api_client.py - API å®¢æˆ·ç«¯

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- **æ€»ç›®å½•æ•°**: 26+
- **Python æ–‡ä»¶**: 20+
- **é…ç½®æ–‡ä»¶**: 4
- **æ–‡æ¡£æ–‡ä»¶**: 5
- **ä»£ç æ€»è¡Œæ•°**: 2000+ è¡Œ

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ å¿…è¦çš„ API å¯†é’¥
```

### 3. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd backend
uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
```

### 4. å¯åŠ¨å‰ç«¯åº”ç”¨
```bash
streamlit run app.py
```

### 5. è®¿é—®åº”ç”¨
- **Streamlit å‰ç«¯**: http://localhost:8501
- **FastAPI æ–‡æ¡£**: http://localhost:8000/docs

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒè¦æ±‚**
   - Python 3.8+
   - FFmpegï¼ˆéŸ³é¢‘å¤„ç†ï¼‰
   - Node.js 16+ï¼ˆLive2D Web æ”¯æŒï¼Œå¯é€‰ï¼‰

2. **API å¯†é’¥**
   - éœ€è¦åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½® OpenAI API å¯†é’¥
   - æˆ–ä½¿ç”¨å…¶ä»–å…¼å®¹çš„ API

3. **Live2D æ¨¡å‹**
   - éœ€è¦ä¸‹è½½ Live2D æ¨¡å‹æ–‡ä»¶åˆ° `models/` ç›®å½•
   - æ¨èä½¿ç”¨ Hiyori å…è´¹æ¨¡å‹

4. **æ•°æ®ç›®å½•**
   - æ‰€æœ‰æ•°æ®ç›®å½•å·²åˆ›å»ºå¹¶åŒ…å« `.gitkeep` æ–‡ä»¶
   - ä¸Šä¼ çš„æ–‡ä»¶ä¼šè‡ªåŠ¨ä¿å­˜åˆ°å¯¹åº”ç›®å½•

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡** - åç«¯å’Œå‰ç«¯åˆ†ç¦»ï¼Œä¾¿äºç»´æŠ¤
2. **å®Œæ•´çš„ API** - æä¾› RESTful API æ¥å£
3. **å®æ—¶å¤„ç†** - æ”¯æŒéŸ³é¢‘å®æ—¶åˆ†æå’Œè¡¨æƒ…ç”Ÿæˆ
4. **å¯æ‰©å±•æ€§** - æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’Œæ¨¡å‹
5. **æ–‡æ¡£å®Œå–„** - è¯¦ç»†çš„å¼€å‘æ–‡æ¡£å’Œä»£ç æ³¨é‡Š

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [å¼€å‘ç¯å¢ƒé…ç½®](docs/development.md)
- [åç«¯å¼€å‘æŒ‡å—](docs/backend_guide.md)
- [å‰ç«¯å¼€å‘æŒ‡å—](docs/frontend_guide.md)
- [æŠ€æœ¯æ¶æ„æ–‡æ¡£](docs/architecture.md)
- [é¡¹ç›®è¯´æ˜](README.md)
- [åˆ›æ„æ–‡æ¡£](idea.md)

---

**åˆ›å»ºæ—¶é—´**: 2025-12-05
**é¡¹ç›®çŠ¶æ€**: âœ… ç›®å½•ç»“æ„å’Œæ ¸å¿ƒæ–‡ä»¶å·²å®Œæˆ
**ä¸‹ä¸€æ­¥**: å®‰è£…ä¾èµ–å¹¶æµ‹è¯•è¿è¡Œ
